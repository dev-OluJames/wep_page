(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["roles"],{"46e6":function(t,e,s){},"6c75":function(t,e,s){},8308:function(t,e,s){"use strict";var a=s("6c75"),o=s.n(a);o.a},df2b:function(t,e,s){"use strict";var a=s("46e6"),o=s.n(a);o.a},ee8f:function(t,e,s){"use strict";s.r(e);var a,o,i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("base-header",{staticClass:"pb-6 pb-8 pt-5 pt-md-8 bg-gradient-success"}),s("b-container",{staticClass:"mt--7",attrs:{fluid:""}},[s("b-row",[s("b-col",[s("roles-list")],1)],1)],1)],1)},n=[],l=s("bd86"),r=(s("5466"),s("450d"),s("ecdf")),c=s.n(r),d=(s("38a0"),s("ad41")),u=s.n(d),b=(s("960d"),s("defb")),p=s.n(b),f=(s("bd49"),s("18ff")),m=s.n(f),h=(s("7f7f"),s("cb70"),s("b370")),g=s.n(h),v=s("556b"),_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-card",{attrs:{"no-body":""}},[s("b-card-header",{staticClass:"border-0"},[s("b-row",[s("b-col",{staticClass:"col-6"},[s("h3",{staticClass:"mb-0"},[t._v("Roles")])]),s("b-col",{staticClass:"col-6 text-right"},[s("base-button",{staticClass:"btn btn-sm btn-primary btn-round btn-icon",attrs:{"data-toggle":"tooltip","data-original-title":"Edit product"},on:{click:t.triggerModal}},[s("span",{staticClass:"btn-inner--icon"},[s("i",{staticClass:"fas fa-key"})]),s("span",{staticClass:"btn-inner--text"},[t._v("Ajouter")])])],1)],1)],1),s("vue-element-loading",{attrs:{active:t.show,spinner:"bar-fade-scale",color:"#2dce94"}}),s("el-table",{staticClass:"table-responsive table",attrs:{"header-row-class-name":"thead-light",data:t.list}},[s("el-table-column",{attrs:{label:"Roles",prop:"roles","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",{staticClass:"status"},[t._v(t._s(a.name))])]}}])}),s("el-table-column",{attrs:{label:"permissions",prop:"permissions","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",{staticClass:"status"},[t._v(t._s(a.permissions))])]}}])}),s("el-table-column",{attrs:{label:"Nombre Utilisateur","min-width":"150px",prop:"userscount"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[s("span",{staticClass:"status"},[t._v(t._s(a.userscount))])]}}])}),s("el-table-column",{attrs:{label:"Action",prop:"completion","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(t){t.row;return[s("span",{staticClass:"text-sm"},[s("a",{attrs:{href:"javascript:;","data-bs-toggle":"tooltip","data-bs-original-title":"Preview product"}},[s("i",{staticClass:"fas fa-eye text-secondary",attrs:{"aria-hidden":"true"}})]),s("a",{staticClass:"mx-3",attrs:{href:"javascript:;","data-bs-toggle":"tooltip","data-bs-original-title":"Edit product"}},[s("i",{staticClass:"fas fa-user-edit text-secondary",attrs:{"aria-hidden":"true"}})]),s("a",{attrs:{href:"javascript:;","data-bs-toggle":"tooltip","data-bs-original-title":"Delete product"}},[s("i",{staticClass:"fas fa-trash text-secondary",attrs:{"aria-hidden":"true"}})])])]}}])})],1),s("b-card-footer",{staticClass:"py-4 d-flex justify-content-end"},[s("base-pagination",{attrs:{"per-page":10,total:50},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),s("add-role-modal",{attrs:{trigger:t.activate},on:{opened:t.deactivate}})],1)},C=[],w=s("6c6e"),E=s("6ad0"),k=s.n(E),y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal",{attrs:{show:t.trigger},on:{"update:show":function(e){t.trigger=e},close:t.triggerModal}},[s("h5",{staticClass:"modal-title",attrs:{slot:"header"},slot:"header"},[t._v("Ajout de Role")]),s("h5",[t._v("Role")]),s("b-form-input",{attrs:{size:"sm",placeholder:"Role"},model:{value:t.role.name,callback:function(e){t.$set(t.role,"name",e)},expression:"role.name"}}),s("h5",[t._v("Permissions")]),s("b-form-group",[s("b-input-group",[s("el-select",{staticStyle:{width:"227%"},attrs:{size:"small",multiple:"multiple",placeholder:"selectionez une permission..."},on:{change:t.selectTables,"remove-tag":t.removePermissions},model:{value:t.table_list,callback:function(e){t.table_list=e},expression:"table_list"}},t._l(t.tables,(function(t,e){return s("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1)],1),t._l(t.selectedTables,(function(e,a){return s("b-list-group",{key:a,attrs:{role:"tablist"}},[s("b-card",{staticClass:"mb-1 card",attrs:{"no-body":""}},[s("b-list-group-item",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:t.accordion+a,expression:"accordion + index"}],staticClass:"card-header",attrs:{"header-tag":"header",href:"#",role:"tab"}},[s("h5",{staticClass:"mb-0"},[t._v(t._s(e.name))])]),s("b-collapse",{attrs:{id:t.accordion+a,visible:"",accordion:"my-accordion",role:"tabpanel"}},[s("b-card-body",[s("b-card-text",[t._v("cochez les permissions de "+t._s(e.name)+" pour ce role.")]),t._l(e.checks,(function(e,a){return s("div",{key:a},[s("b-form-checkbox-group",{attrs:{id:"checkboxes-4"},model:{value:t.role.permissions,callback:function(e){t.$set(t.role,"permissions",e)},expression:"role.permissions"}},[s("b-form-checkbox",{attrs:{value:e.id}},[t._v("\n                  "+t._s(e.value)+"\n                ")])],1)],1)}))],2)],1)],1)],1)})),s("template",{slot:"footer"},[s("base-button",{attrs:{type:"primary"},on:{click:t.addRole}},[t._v("Save changes")]),s("base-button",{staticClass:"ml-auto",attrs:{type:"link"},on:{click:t.triggerModal}},[t._v("Close")])],1)],2)},x=[],j=(s("2fdb"),s("6762"),s("28a5"),s("ac6a"),new w["a"]("permissions")),O={name:"addRole",props:{trigger:{type:Boolean,default:!1}},data:function(){return{modal:!1,role:{},permissions:[],tables:[],selectedTables:[],table_list:[],accordion:"accordion-",check_list:[]}},created:function(){this.getPermissions()},methods:{triggerModal:function(){this.trigger=!1,this.$emit("opened")},getPermissions:function(){var t=this;j.list().then((function(e){t.permissions=e.data})).catch((function(t){console.log(t)})).finally((function(){console.log("DONE",t.permissions),t.getTables(t.permissions)}))},getTables:function(t){var e=this;this.tables=[],this.check_list=[];var s=0,a=0,o=[],i=[],n=[];t.forEach((function(l){var r=e.capitalizeFirstLetter(l.name.split(" ")[1]),c=e.capitalizeFirstLetter(l.name.split(" ")[0]);console.log(r),o.includes(r)?i.push({id:l.id,value:c}):(o.push(r),0!==i.length&&(n.push({id:a,values:i}),i=[]),i.push({id:l.id,value:c}),a=l.id,e.tables.push({id:l.id,name:r})),s++,s===t.length-1&&n.push({id:a,values:i})})),n.forEach((function(t){e.tables.forEach((function(e){e.id===t.id&&(e["checks"]=t.values)}))})),console.log("TABLES",this.tables),this.check_list=n},selectTables:function(t){var e,s=this;console.log("VALUES",t),this.selectedTables=[],this.selectedPermissions=[],t.forEach((function(t){e=s.tables.filter((function(e){return e.id===t})),s.selectedTables.push(e[0])}))},removePermissions:function(){var t=this;if(this.role.permissions&&0!==this.role.permissions.length){var e=[];this.selectedTables.forEach((function(s){e=t.role.permissions.filter((function(t){return console.log("TABLE NAME",t,s.name),t.includes(s.name)}))})),this.role.permissions=e,console.log("SELECTED TABLES",this.selectedTables),console.log("SELECTED TABLES",this.role.permissions)}},addRole:function(){console.log("ROLE ENVOYE",this.role)},capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}},T=O,L=s("2877"),R=Object(L["a"])(T,y,x,!1,null,"7b4a50bd",null),S=R.exports,P=new w["a"]("roles"),A={name:"roles-list",components:(a={},Object(l["a"])(a,u.a.name,u.a),Object(l["a"])(a,c.a.name,c.a),Object(l["a"])(a,"VueElementLoading",k.a),Object(l["a"])(a,"addRoleModal",S),a),data:function(){return{activate:!1,list:[],currentPage:1,show:!1}},created:function(){this.getRoles()},methods:{deactivate:function(){this.activate=!1},triggerModal:function(){this.activate=!0},getRoles:function(){var t=this;this.show=!0,P.list().then((function(e){t.list=e.data})).catch((function(t){console.log(t)})).finally((function(){t.show=!1,console.log("DONE")}))}}},z=A,M=(s("df2b"),Object(L["a"])(z,_,C,!1,null,"fecdd148",null)),N=M.exports,$={name:"roles",components:(o={RolesList:N},Object(l["a"])(o,g.a.name,g.a),Object(l["a"])(o,m.a.name,m.a),Object(l["a"])(o,p.a.name,p.a),Object(l["a"])(o,u.a.name,u.a),Object(l["a"])(o,c.a.name,c.a),o),data:function(){return{projects:v["a"]}},created:function(){console.log("Kouili")}},B=$,D=(s("8308"),Object(L["a"])(B,i,n,!1,null,null,null));e["default"]=D.exports}}]);
//# sourceMappingURL=roles.07152301.js.map